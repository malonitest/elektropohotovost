---
import Breadcrumbs from "../components/Breadcrumbs.astro";
import Footer from "../components/Footer.astro";
import JsonLd from "../components/JsonLd.astro";
import { phone } from "../data/site";

export type BreadcrumbItem = { name: string; url: string };

export type Props = {
	title: string;
	description: string;
	canonical: string;
	breadcrumbs?: BreadcrumbItem[];
	jsonLdGraph?: unknown[];
};

const { title, description, canonical, breadcrumbs = [], jsonLdGraph = [] } = Astro.props;
const phoneDigits = String(phone || "").replace(/\D+/g, "");
---
<!doctype html>
<html lang="cs">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="generator" content={Astro.generator} />

		<title>{title}</title>
		<meta name="description" content={description} />
		<link rel="canonical" href={canonical} />

		<meta property="og:type" content="website" />
		<meta property="og:locale" content="cs_CZ" />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:url" content={canonical} />

		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="preconnect" href={new URL(canonical).origin} />

		<JsonLd graph={jsonLdGraph} />

		<script type="text/javascript" is:inline>
			(function(c,l,a,r,i,t,y){
				c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
				t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
				y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
			})(window, document, "clarity", "script", "uu2c3wx4m1");
		</script>

		<style>
			:root {
				--bg: #0b0f14;
				--panel: #101824;
				--text: #e8eef6;
				--muted: #b7c3d6;
				--line: rgba(255, 255, 255, 0.12);
				--accent: #7dd3fc;
				--accent2: #a7f3d0;
				--danger: #fb7185;
				--max: 1100px;
			}

			* { box-sizing: border-box; }
			html, body { height: 100%; }
			body {
				margin: 0;
				font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
				line-height: 1.5;
				background: radial-gradient(1200px 800px at 20% 0%, rgba(125, 211, 252, 0.14), transparent 60%),
					radial-gradient(1200px 800px at 80% 10%, rgba(167, 243, 208, 0.12), transparent 55%),
					var(--bg);
				color: var(--text);
			}

			a { color: inherit; text-decoration: underline; text-decoration-color: rgba(125, 211, 252, 0.6); text-underline-offset: 3px; }
			a:hover { text-decoration-color: rgba(167, 243, 208, 0.8); }
			.container { max-width: var(--max); margin: 0 auto; padding: 18px 16px 56px; }
			.header {
				display: flex; align-items: center; justify-content: space-between;
				gap: 16px; padding: 12px 0 18px;
			}
			.brand { display: flex; flex-direction: column; gap: 2px; }
			.brand b { font-size: 16px; letter-spacing: 0.2px; }
			.brand small { color: var(--muted); }
			.nav { display: flex; gap: 14px; flex-wrap: wrap; justify-content: flex-end; }
			.nav a { text-decoration: none; padding: 8px 10px; border: 1px solid var(--line); border-radius: 10px; background: rgba(16, 24, 36, 0.55); }
			.nav a:hover { border-color: rgba(125, 211, 252, 0.5); }

			main { display: block; }
			.card { border: 1px solid var(--line); border-radius: 16px; background: rgba(16, 24, 36, 0.72); }
			.card-pad { padding: 16px; }
			.grid { display: grid; gap: 12px; }
			.grid-2 { grid-template-columns: 1fr; }
			@media (min-width: 840px) {
				.grid-2 { grid-template-columns: 1fr 1fr; }
			}

			.hint { color: var(--muted); }
			.badge { display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px; border-radius: 999px; border: 1px solid var(--line); }
			.badge strong { color: var(--accent2); }
			.hr { height: 1px; background: var(--line); margin: 18px 0; }
			.list { margin: 0; padding-left: 18px; }
			.list li { margin: 6px 0; }
			.kicker { color: var(--muted); font-size: 14px; }
			.h1 { font-size: 30px; margin: 8px 0 10px; line-height: 1.15; }
			@media (min-width: 840px) { .h1 { font-size: 38px; } }
			.h2 { font-size: 18px; margin: 0 0 8px; }
			.section { margin: 14px 0; }

			.ctaRow { display: flex; gap: 10px; flex-wrap: wrap; }
			.btn {
				display: inline-flex; align-items: center; justify-content: center;
				gap: 10px; padding: 12px 14px; border-radius: 12px;
				border: 1px solid rgba(125, 211, 252, 0.45);
				background: rgba(125, 211, 252, 0.12);
				text-decoration: none; font-weight: 700;
			}
			.btn:hover { border-color: rgba(167, 243, 208, 0.65); background: rgba(167, 243, 208, 0.12); }
			.btnSecondary { border-color: var(--line); background: rgba(16, 24, 36, 0.6); }
			.btnDanger { border-color: rgba(251, 113, 133, 0.55); background: rgba(251, 113, 133, 0.12); }

			.breadcrumbs { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; color: var(--muted); font-size: 14px; }
			.breadcrumbs a { color: var(--muted); text-decoration: none; border-bottom: 1px dotted rgba(255, 255, 255, 0.25); }
			.breadcrumbs a:hover { color: var(--text); border-bottom-color: rgba(125, 211, 252, 0.6); }
			.sep { opacity: 0.6; }
		</style>
	</head>
	<body>
		<div class="container">
			<header class="header">
				<div class="brand">
					<b><a href="/" style="text-decoration:none">Elektro pohotovost</a></b>
					<small>Elektrikář nonstop 24/7</small>
				</div>
				<nav class="nav" aria-label="Hlavní navigace">
					<a href="/porucha/">Poruchy</a>
					<a href="/sluzby/">Služby</a>
					<a href="/kontakt/">Kontakt</a>
				</nav>
			</header>


			<Breadcrumbs items={breadcrumbs} />

			<main>
				<slot />
			</main>

			<div class="hr" role="separator" />
			<Footer />
		</div>

		<script is:inline>
			(function(){
				var mainPhoneDigits = "${phoneDigits}";
				function normalizeDigits(value){ return String(value||"").replace(/\D+/g, ""); }
				function extractTelDigits(href){
					if(!href) return "";
					href = String(href).trim();
					if(href.toLowerCase().indexOf("tel:") !== 0) return "";
					return normalizeDigits(href.slice(4));
				}
				document.addEventListener("click", function(e){
					var target = e.target;
					if(!target || !target.closest) return;
					var a = target.closest("a");
					if(!a) return;
					var href = a.getAttribute("href") || "";
					var clickedDigits = extractTelDigits(href);
					if(!clickedDigits) return;
					if(typeof window.clarity === "function"){
						window.clarity("set", "call_phone", clickedDigits);
						window.clarity("event", "tel_click");
						if(mainPhoneDigits && clickedDigits === mainPhoneDigits){
							window.clarity("event", "volete_774621763_click");
						}
					}
				}, true);
			})();
		</script>
	</body>
</html>
